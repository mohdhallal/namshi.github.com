
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shisha, smoke test those URLs! - Tech @ Namshi.com</title>
  <meta name="author" content="Namshi">

  
  <meta name="description" content="Here comes Shisha! Yet another NodeJs based application from Namshi! Shisha is a smoke testing module,
what is smoke testing? Read about it here.
In &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://namshi.github.io/blog/2014/09/17/shisha-smoke-test-those-urls">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Tech @ Namshi.com" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<script type="text/javascript">
//<![CDATA[
  (function() {
    var shr = document.createElement('script');
    shr.setAttribute('data-cfasync', 'false');
    shr.src = '//dsms0mj1bbhn4.cloudfront.net/assets/pub/shareaholic.js';
    shr.type = 'text/javascript'; shr.async = 'true';
    shr.onload = shr.onreadystatechange = function() {
      var rs = this.readyState;
      if (rs && rs != 'complete' && rs != 'loaded') return;
      var site_id = 'cd6fa3364ca85c66b5dc6d0c13e7fde9';
      try { Shareaholic.init(site_id); } catch (e) {}
    };
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(shr, s);
  })();
//]]>
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44619227-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:namshi.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Shisha, Smoke Test Those URLs!</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-09-17T10:00:00+04:00" pubdate data-updated="true">Sep 17<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Here comes Shisha! Yet another NodeJs based application from Namshi! Shisha is a smoke testing module,
what is smoke testing? Read about it <a href="http://en.wikipedia.org/wiki/Smoke_testing_(software)">here</a>.
In short, smoke testing is a term coming from Electrical Engineering, where an Electronic chip is simply tested by
plugging it into an electric source and observing if smoke comes out! How does shisha relate to this? Well,
just give shisha a list or a file of URLs and expected HTTP status code for each URL, and it will assert the expected
status codes and show you back a report! It serves as a quick and fast testing platform for your website/APIs.
Instead of waiting for a unit or an integration test to be prepared and run, simply set shisha to run on your URLs,
it is fast and simple!</p>

<!-- more -->


<h1>Install it</h1>

<p>Install shisha globally from <a href="https://www.npmjs.org/package/shisha">NPM</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install -g shisha</span></code></pre></td></tr></table></div></figure>


<h1>Prepare it and smoke it</h1>

<p>Create a text file named <code>.smoke</code> where all your test cases will reside.</p>

<p>Fill it as following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://example.org 200
</span><span class='line'>http://example.org/not-there 404</span></code></pre></td></tr></table></div></figure>


<p>From the directory where your <code>.smoke</code> file is, run <code>shisha</code> and observe the shisha smoking!</p>

<p>Here is a video illustration:</p>

<p><video width='640' height='640' preload='none' controls poster=''><source src='http://tech.namshi.com/videos/example.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'></video></p>

<h1>Features</h1>

<p>You can:&ndash;</p>

<ul>
<li>Pass a path to any text file containing the right URL status code mapping using <code>--smoke</code> argument</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha --smoke /path/to/text/file</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Pass locals to be replaced in your text file</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha --domain example.org --protocol http</span></code></pre></td></tr></table></div></figure>


<p>so your text file would look something like this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{{ protocol }}://{{ domain }}/path 200</span></code></pre></td></tr></table></div></figure>


<p>Here is how locals work:</p>

<p><video width='640' height='640' preload='none' controls poster=''><source src='http://tech.namshi.com/videos/locals.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'></video></p>

<ul>
<li>Easily extend shisha in your code as follows:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install --save shisha</span></code></pre></td></tr></table></div></figure>


<p>then, in your code:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var shisha = require('shisha');</span></code></pre></td></tr></table></div></figure>


<p>you will have access to the <code>smoke</code> method which accepts the following arguments:</p>

<ol>
<li>data source, which can be a path to a text file, a list or an object.</li>
<li>A list of locals to be replaced in the placeholders of the text file.</li>
<li>A callback which accepts the report argument where the set of smoking results are parsed.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> shisha.smoke('/path/to/a/text/file', options, callback);</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha.smoke(
</span><span class='line'>    [
</span><span class='line'>        {
</span><span class='line'>             url: 'http://example.org',
</span><span class='line'>             status: 200
</span><span class='line'>         },
</span><span class='line'>         ...,
</span><span class='line'>         ...
</span><span class='line'>    ], locals, callback
</span><span class='line'>);</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha.smoke(
</span><span class='line'>    {
</span><span class='line'>        'http://example.org': 200,
</span><span class='line'>        'http://example2.org': 404,
</span><span class='line'>        ...,
</span><span class='line'>        ...
</span><span class='line'>    }, locals, callback
</span><span class='line'>);</span></code></pre></td></tr></table></div></figure>


<p><code>locals</code> as mentioned before, is a list of placeholders to be replaced in the smoke file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha.smoke(urls, {protocol: 'https', domain: 'namshi.com'}</span></code></pre></td></tr></table></div></figure>


<p><code>callback</code> is a function called when smoking is done!</p>

<p>if you do not have any locals, you can simply omit it.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>shisha.smoke(urls, callback);</span></code></pre></td></tr></table></div></figure>


<p>Happy smoking!</p>
</div>


  <footer>
    <p class="meta">
      
  


<span>
    <span class="byline author vcard">Posted by <a href="/team/#Mohamad Hallal"><span class="fn">Mohamad Hallal</span></a></span>&nbsp;
</span>


      








  


<time datetime="2014-09-17T10:00:00+04:00" pubdate data-updated="true">Sep 17<span>th</span>, 2014</time>
      

<div class="categories">
  
    <a class='category' href='/blog/categories/nodejs/'>nodejs</a>, <a class='category' href='/blog/categories/npm/'>npm,</a>, <a class='category' href='/blog/categories/smoke-testing/'>smoke-testing,</a>
  
</div>


    </p>
    
      <div class="sharing">
  <div class='shareaholic-canvas' data-app='share_buttons' data-app-id='11351537'></div>
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/09/16/wanna-hear-about-soa-and-how-we-deal-with-apis-then-vote-for-cirpo/" title="Previous Post: Wanna hear about SOA and how we deal with APIs? Then vote for cirpo!">&laquo; Wanna hear about SOA and how we deal with APIs? Then vote for cirpo!</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/09/18/newsletter-number-56/" title="Next Post: Newsletter #56">Newsletter #56 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section id="titles">
  <a href="http://namshi.github.io" title="Tech @ Namshi.com"><img id="logo" src="/images/namshi-logo.png" /></a>
  <h1 id="site_title"><a href="http://namshi.github.io" title="Tech @ Namshi.com">Tech @ Namshi.com</a></h1>
</section>

<section id="menu">
  <ul>
    <li><i class="fa fa-home fa-lg"></i><a href="http://namshi.github.io"> Home </a></li>
    <li><i class="fa fa-calendar fa-lg"></i><a href="http://namshi.github.io/archives/"> Archives </a></li>
    <li><i class="fa fa-user fa-lg"></i><a href="http://namshi.github.io/about/"> About </a></li>
    <li><i class="fa fa-user fa-lg"></i><a href="http://namshi.github.io/team/"> Team </a></li>
    <li><i class="fa fa-user fa-lg"></i><a href="http://namshi.github.io/join-us/"> Join Us </a></li>
  </ul>
</section>

<section id="social">
  

  

  

  
    <a href="https://github.com/namshi" title="namshi"><i class="fa fa-github fa-2x"></i></a>
  

  

  
    <a href="https://twitter.com/NamshiDotCom" title="NamshiDotCom"><i class="fa fa-twitter fa-2x"></i></a>
  

  
    <a href="https://facebook.com/NamshiFans" title="NamshiFans"><i class="fa fa-facebook fa-2x"></i></a>
  
  
  <a href="http://namshi.github.io/atom.xml" title="Feed"><i class="fa fa-rss fa-2x"></i></a>

</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/19/welcome-es6-javascript-is-not-fancy-anymore/">Welcome ES6 ! JavaScript Is Not Fancy Anymore</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/16/newsletter-number-60/">Newsletter #60</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/09/newsletter-number-59/">Newsletter #59</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/02/newsletter-number-58/">Newsletter #58</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/02/what-went-down-at-symfonylive-london/">What Went Down at SymfonyLive London?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/namshi">@namshi</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'namshi',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Namshi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'namshitechblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://namshi.github.io/blog/2014/09/17/shisha-smoke-test-those-urls/';
        var disqus_url = 'http://namshi.github.io/blog/2014/09/17/shisha-smoke-test-those-urls/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
